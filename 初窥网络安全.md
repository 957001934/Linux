### SSH协议

Secure Shell(SSH) 是专为远程登录和其他网络服务提供安全性的协议，能够进行数据加密，传输的数据都经过压缩，能够加快传输的速度。可以预防DNS欺骗

##### 安全机制

采用非对称加密技术（RSA）加密了所有传输的数据，提供两种验证方法，基于口令的安全验证和基于密钥的安全验证。

1. 口令登录

   `ssh 客户端用户名@服务器ip地址` 

   默认端口22，也可更改端口

   第一次登录远程主机会提示远程主机的真实性无法确定，并给出公钥指纹，确认后会将远程主机加入已知主机列表。

2. 公钥登录

   `ssh-keygen -t rsa   *#-t表示类型选项，这里采用rsa加密算法*`

   先在本机生成密钥对

   `ssh-copy-id ldz@192.168.0.1` 

   再将公钥复制到远程主机中

### 常见网络欺骗

##### DNS欺骗

> DNS欺骗就是攻击者冒充[域名服务器](https://baike.baidu.com/item/域名服务器/9705133)的一种欺骗行为。 原理：如果可以冒充域名服务器，然后把查询的IP地址设为攻击者的IP地址，这样的话，用户上网就只能看到攻击者的主页，而不是用户想要取得的网站的主页了，这就是DNS欺骗的基本原理。DNS欺骗其实并不是真的“黑掉”了对方的网站，而是冒名顶替、招摇撞骗罢了。

主要的欺骗形式

* Hosts文件篡改
* 本机DNS劫持

##### ARP欺骗

ARP（地址解析协议）实现IP地址和MAC地址之间之间的转换。

> 由于局域网的网络流通不是根据IP地址进行，而是按照MAC地址进行传输、计算机是根据mac来识别一台机器。每台主机都会存在一个ARP高速缓存表，里面记录了局域网内所有主机的Mac地址，当它需要与另一个主机通信时会先查询本地ARP表，通过对方Mac地址来封装数据包，如果本地ARP表中没有对应的Mac地址，它会向局域网发出广播“我的ip是…我的Mac地址是…请问ip为…的Mac地址”，当对应主机收到广播核对ip然后通过单点传输的方式告诉它自己的Mac地址，然后双方ARP表中就多了彼此的Mac地址。

以上说的通常是动态ARP表，即会通过与其他计算机的通信自动维护更新ARP表，但是还有一种静态ARP表，ARP表需要网络管理员手动维护，而不允许私自修改，这在安全性较高的公司内网中较为常见。

欺骗的类型

* 单向欺骗：A、B、C三个人，A与C正常通信，B想知道A给C发的内容，就伪造ARP响应包，更改A的ARP表，所以A发送给C的信息会先传送到B，B可以丢弃数据包，这样C就收不到A发的数据了，但是C还是可以正常给A发送数据的，这就是单项欺骗

* 双向欺骗：同样是A、B、C三个人，B同时给A、C发送响应包B告诉A它的ip是C的ip，Mac地址还是B的，告诉C它的ip是自己的，Mac地址是A的，这样A、C的通信就都会经过B，这就叫双向欺骗

##### IP欺骗

> 基本原理是伪造A的报文发给B，报文中的IP地址进行篡改。但是由于TCP协议的稳定性（由TCP的多个控制位如SYN,ACK来保证），所以欺骗过程较为复杂。

欺骗过程

* 首先要使被信任主机失去工作能力，比如通过SYN洪泛攻击。
* 连接到目标机的某个端口来猜测ISN基值和增加规律，用于猜测目标主机的数据包序例号
* 修改源地址，伪造发包